{namespace t3extblog = TYPO3\T3extblog\ViewHelpers\Backend}

<tr class="db_list_normal">
	<td class="col-icon">
		<f:comment>@todo Remove onclick event when TYPO3 6.2 is no longer relevant</f:comment>
		<a href="#"
		   onClick="if (window.showClickmenu) showClickmenu('tx_t3blog_com', '{comment.uid}', '1', '', '', ''); return false;"
		   class="t3-js-clickmenutrigger"
		   data-uid="{comment.uid}"
		   data-table="tx_t3blog_com"
		   title="{comment.uid}">
			<t3extblog:spriteIconForRecord table="tx_t3blog_com" object="{comment}" />
		</a>
	</td>
	<td>
		<t3extblog:link.editOnClick parameters="edit[tx_t3blog_com][{comment.uid}]=edit" title="{comment.plainText -> f:format.crop(maxCharacters: 300)}">
			{comment.title -> f:format.crop(maxCharacters: 30)}
		</t3extblog:link.editOnClick>
	</td>
	<td>{comment.date -> f:format.date(format: 'd.m.Y - H:i:s')}</td>
	<td>{comment.author}</td>
	<td><a href="mailto:{comment.email}">{comment.email}</a></td>
	<td><a href="{comment.website}">{comment.website -> f:format.crop(maxCharacters: 30)}</a></td>
	<td>
		<f:if condition="{comment.approved}">
			<f:then>
				<t3extblog:link.issueCommand parameters="data[tx_t3blog_com][{comment.uid}][approved]=0">
					<t3extblog:spriteManagerIcon iconName="status-status-permission-granted" options="{title: '{f:translate(key: \"module.comment.help.approved.0\")}'}" />
				</t3extblog:link.issueCommand>
			</f:then>
			<f:else>
				<t3extblog:link.issueCommand parameters="data[tx_t3blog_com][{comment.uid}][approved]=1">
					<t3extblog:spriteManagerIcon iconName="status-status-permission-denied" options="{title: '{f:translate(key: \"module.comment.help.approved.1\")}'}" />
				</t3extblog:link.issueCommand>
			</f:else>
		</f:if>
	</td>
	<td>
		<f:if condition="{comment.spam}">
			<f:then>
				<t3extblog:link.issueCommand parameters="data[tx_t3blog_com][{comment.uid}][spam]=0">
					<t3extblog:spriteManagerIcon iconName="actions-edit-localize-status-high" options="{title: '{f:translate(key: \"module.comment.help.spam.0\")}'}" />
				</t3extblog:link.issueCommand>
			</f:then>
			<f:else>
				<t3extblog:link.issueCommand parameters="data[tx_t3blog_com][{comment.uid}][spam]=1">
					<t3extblog:spriteManagerIcon iconName="actions-edit-localize-status-low" options="{title: '{f:translate(key: \"module.comment.help.spam.1\")}'}" />
				</t3extblog:link.issueCommand>
			</f:else>
		</f:if>
	</td>
	<td class="action">
		<t3extblog:link.editOnClick parameters="edit[tx_t3blog_com][{comment.uid}]=edit">
			<t3extblog:spriteManagerIcon iconName="actions-document-open" options="{title: '{f:translate(key: \"module.comment.help.edit\")}'}" />
		</t3extblog:link.editOnClick>
		<f:if condition="{comment.hidden}">
			<f:then>
				<t3extblog:link.issueCommand parameters="data[tx_t3blog_com][{comment.uid}][hidden]=0">
					<t3extblog:spriteManagerIcon iconName="actions-edit-unhide" options="{title: '{f:translate(key: \"module.comment.help.hide.0\")}'}" />
				</t3extblog:link.issueCommand>
			</f:then>
			<f:else>
				<t3extblog:link.issueCommand parameters="data[tx_t3blog_com][{comment.uid}][hidden]=1">
					<t3extblog:spriteManagerIcon iconName="actions-edit-hide" options="{title: '{f:translate(key: \"module.comment.help.hide.1\")}'}" />
				</t3extblog:link.issueCommand>
			</f:else>
		</f:if>

		<t3extblog:link.issueCommand parameters="cmd[tx_t3blog_com][{comment.uid}][delete]=1" onclick="return confirm(\"{f:translate(key: 'module.message.deleteRecord')}\");">
			<t3extblog:spriteManagerIcon iconName="actions-edit-delete" options="{title: '{f:translate(key: \"module.comment.help.delete\")}'}" />
		</t3extblog:link.issueCommand>
	</td>
</tr>